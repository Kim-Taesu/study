#### 웹 서버 만들기

- `http` 모듈을 사용하면 웹 서버 기능을 담당하는 서버 객체를 만들 수 있다.
  - `require('http');`
  - `createServer()` 메소드로 서버 객체를 만든다.
- `listen()` 메소드로 웹 서버를  실행
  - 첫 번째 파라미터 : 서버 포트
  - 두 번째 파라미터 : 콜백 함수
    - 웹 서버가 시작되면 호출된다.
- `close()` : 서버를 종료하는 메소드
- 전체적인 과정
  - `createServer()` 메소드를 호출하여 웹 서버 객체를 생성
  - 웹 서버 객체의 `listen()` 메소드를 호출하여 특정 포트에서 대기

---

#### 클라이언트가 웹 서버에 요청할 때 발생하는 이벤트 처리하기

- `connection` : 클라이언트가 접속하여 연결이 만들어질 때 발생하는 이벤트
  - `on()` 메소드를 호출할 때 첫 번째 파라미터로 `connection` 이벤트 이름을 전달하고, 두 번째 파라미터로 `콜백함수` 전달
- `request` : 클라이언트가 요청할 때 발생하는 이벤트
- `close` : 서버를 종료할 때 발생하는 이벤트

---

#### res 객체

- `writeHead()`, `write()`, `end()` 메소드를 사용하면 클라이언트로 응답을 보낼 수 있다.
- `writeHead(statusCode[,statusMessage][,headers])`
  - 응답으로 보낼 헤더를 만든다.
- `write(chunk[,encoding][, callback])`
  - 응답 본문(body) 데이터를 만든다.
  - 여러 번 호출될 수 있다.
- `end([data][, encoding][, callback])`
  - `end()` 메소드는 응답을 모두 보냈다는 것을 의미, `end()` 메소드가 호출될 때 클라이언트로 응답을 전송
  - 파라미터에 data가 들어 있다면 이 데이터를 포함시켜 응답을 전송
  - 콜백함수가 지정되면 응답이 전송된 후 콜백 함수가 호출된다.

---

#### HTTP 클라이언트

- `GET`, `POST` 방식 사용

#### `GET` 방식

- `http` 객체의 `get()` 메소드를 사용하면 다른 사이트에 요청을 보내고 응답을 받아 처리할 수 있다.
- `get()` 메소드의 첫번 째 파라미터 : 다른 사이트의 정보를 담고 있는 객체
- `get()` 메소드의 두번 째 파라미터 : 콜백 함수
- 응답 데이터를 받을 때는 `data` 이벤트로 `end` 이벤트로 처리하면 된다.
  - 데이터를 받고 있을 때는 `data` 이벤트 발생
  - 데이터 수신이 완료 되면 `end` 이벤트 발생

#### `POST` 방식

- `POST` 방식은 `request()` 메소드를 사용한다.
- 특정 요청을 보내려면 `요청 헤더`와 `본문`을 모두 직접 설정해야 한다.

---

#### 익스프레스 서버 객체

- `var app = require('express');`
- `set(name, value)` : 서버 설정을 위한 속성을 지정
  - `set()`메소드로 지정한 속성은 `get()` 메소드로 꺼내어 확인할 수 있다.
  - 서버 설정을 위해 미리 정해진 주요 속성 이름
    - `env` : 서버 모드를 설정
    - `views` : 뷰들이 들어 있는 폴더 또는 폴더 배열을 설정
    - `view engine` : 디폴트로 사용할 뷰 엔진을 설정
- `get(name)` : 서버 설정을 위해 지정한 속성을 꺼내 온다.
- `use([path,] function [,function...])` : 미들웨어 함수를 사용
- `get([path,] function)` : 특정 패스로 요청된 정보를 처리한다.

#### view engine 속성

- `ejs`나 `pug`를 많이 사용
- 클라이언트에 보낼 응답 웹 문서를 만들 때 사용
- 미리 템플릿을 만들어두고 그 템플릿을 사용해 응답 웹 문서를 만들어 낸다.
- 클라이언트에 응답을 보낼 때 사용하는 템플릿은 여러 종류가 있는데, 그 종류를 결정하는 것이 바로 `뷰 엔진`이다.

---

#### 미들웨어

- 노드에서는 미들웨어를 사용하여 필요한 기능을 순차적으로 실행할 수 있다.
- 익스프레스에서는 미들웨어 이외에 `라우터`도 사용하는데 미들웨어나 라우터는 하나의 독립된 기능을 가진 함수
- 함수를 `use()` 메소드를 사용해 미들웨어로 등록해 두면, 모든 클라이언트 요청이 해당 미들웨어를 거친다.
- 각 미들웨어는 `next()` 메소드를 호출하여 그 다음 미들웨어가 처리할 수 있도록 순서를 넘길 수 있다.
  - 각각의 미들웨어 안에서 마지막에 `next()` 메소드를 호출하여 다음 미들웨어로 처리 결과를 넘겨주어야 한다.

#### 라우터

- 클라이언트의 요청 패스를 보고 이 요청 정보를 처리할 수 있는 곳으로 기능을 전달해 주는 역할
  - =라우팅
  - 클라이언트의 요청 패스에 따라 각각을 담당하는 함수로 분리

---

#### 익스프레스 응답 객체의 메소드

- `send([body])` : 클라이언트에 응답 데이터를 보낸다. (HTML 문자열, Buffer 객체, JSON 객체, JSON 배열)
- `status(code)` : HTTP 상태 코드를 반환.
  - 상태 코드는 `end()`나 `send()` 같은 전송 메소드를 추가로 호출해야 전송 가능
- `sendStatus(statusCode)` : HTTP 상태 코드를 반환.
  - 상태 코드는 상태 메시지와 함께 전송
- `redirect([status,] path)` : 웹 페이지 경로를 강제로 이동
- `render(view [, locals][, callback])` : 뷰 엔진을 사용해 문서를 만든 후 전송

---

#### 익스프레스에서 request 객체에 추가한 헤더와 파라미터

- `query` : 클라이언트에서 `GET` 방식으로 전송한 요청 파라미터 확인
- `body` : 클라이언트에서 `POST` 방식으로 전송한 요청 파라미터를 확인
  - `body-parser`와 같은 외장 모듈을 사용해야 한다.
- `header(name)` : 헤더를 확인

----

#### 라우터 객체 등록 메소드

- `get(path,callback)`
- `post(path,callback)`
- `put(path,callback)`
- `delete(path,callback)`
- `all(path,callback)`

---

#### URL 파라미터 

- URL 파라미터는 요청 파라미터와 달리 URL 주소의 일부로 들어간다.
- `:파라미터값` 형태로 사용
  - `req.params.파라미터값` 형태로 접속 가능
  - `토큰` 이라고 한다.

---

#### 쿠키 처리

- 쿠키는 클라이언트 웹 브라우저에 저장되는 정보, 일정 기간 동안 저장하고 싶을 때 사용
- `cookie-parser` 미들웨어 사용하여 쿠키를 설정하거나 확인할 수 있다.

---

#### 세션

- 상태 정보를 서버에 저장
- `express-session` 미들웨어 사용하여 세션 관리