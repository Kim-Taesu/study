#### 하드웨어

- 시스템 기반을 구성하는 물리적인 요소로서 서버 장비 본체나 데이터를 저장하기 위한 스토리지, 전원 장치 등이 들어간다.

#### 네트워크

- 시스템 이용자가 원격지에서 액세스할 수 있도록 서버들을 연결하기 위한 요구사항

#### OS(운영체제)

- 하드웨어나 네트워크 장비를 제어하기 위한 기본 소프트웨어로, 하드웨어의 리소스나 프로세스를 관리한다.

#### 미들웨어

- 서버 OS 상에서 서버가 특정 역할을 다하기 위한 기능을 갖고 있는 소프트웨어
- OS와 업무 처리를 수행하는 애플리케이션 사이에 들어가는 소프트웨어

#### 컨테이너

- 호스트 OS상에 논리적인 구획(컨테이너)을 만들고, 애플리케이션을 작동시키기 위해 필요한 라이브러리나 애플리케이션 등을 하나로 모아, 마치 별도의 서버인 것처럼 사용할 수 있게 만든 것
- 호스트 OS의 리소스를 논리적으로 분리시키고, 여러 개의 컨테이너가 공유하여 사용
  - 컨테이너는 오버헤드가 적기 때문에 가볍고 고속으로 작동한다.

---

#### Docker?

- 애플리케이션의 실행에 필요한 환경을 하나의 이미지로 모아두고, 그 이미지를 사용하여 다양한 환경에서 애플리케이션 실행 환경을 구축 및 운용하기 위한 오픈소스 플랫폼
- Docker 이미지를 바탕으로 Docker 컨테이너의 가동시킨다.

#### Docker의 기능

- build : 이미지를 만드는 기능
  - 하나의 이미지에는 하나의 애플리케이션만 넣어 두고, 여러 개의 컨테이너를 조합하여 서비스를 구축한다는 방법을 권장
- ship : 이미지를 공유하는 기능
- 
- run : 컨테이너를 작동시키는 기능

---

#### Docker 컴포넌트

- Docker Engine 
  - Docker 이미지를 생성하고 컨테이너를 가동시키기 위한 Docker의 핵심 기능
  - Docker 명령의 실행이나 Dockerfile에 의한 이미지도 생성
- Docker Registry
  - 컨테이너의 바탕이 되는 Docker 이미지를 공개 및 공유하기 위한 레지스트리 기능
  - Docker Hub도 Docker Registry를 사용
- Docker Compose
  - 여러 개의 컨테이너 구성 정보를 코드로 정의하고 명령을 실행
  - 애플리케이션의 실행 환경을 구성하는 컨테이너들을 관리하기 위한 툴
- Docker Machine
  - 클라우드 환경에 Docker의 실행 환경을 명령으로 자동 생성하기 위한 툴
- Docker Swarm
  - 여러 Docker 호스트를 클러스터화하기 위한 툴
  - Manager : 클러스터를 관리하거나 API를 제공하는 역할
  - Node : Docker 컨테이너를 실행하는 역할

---

#### namespace

- namespace : 한 덩어리의 데이터에 이름을 붙여 분할함으로써 충돌 가능성을 줄이고, 쉽게 참조할 수 있게 하는 개념
  - Docker 컨테이너를 실행하는 기술은 Linux 커널의 namespace라는 기능을 사용
  - 이름과 연결된 실체는 그 이름이 어떤 이름공간에 속해 있는지 고유하게 정해진다.
- namespace 종류
  - PID namespace
    - PID와 프로세스를 격리시킨다.
    - namespace가 다른 프로세스끼리는 서로 액세스할 수 없다.
  - Network namespace
    - 격리된 namespace마다 네트워크 디바이스, IP 주소, 포트 번호, 라우팅 테이블, 필터링 테이블 등과 같은 네트워크 리소스를 가질 수 있다.
    - Docker 서비스를 실행시키는 OS가 사용중인 포트번호와 같은 포트번호를 컨테이너 안에서 사용할 수 있다.
  - UID namespace
    - UID, GID별로 독립적으로 가질 수 있다.
  - MOUNT namespace
    - MOUNT : 컴퓨터에 연결된 기기나 기억장치를 OS에 인식시켜 이용 가능한 상태로 만드는 것
    - namespace 안에서 수행한 마운트는 호스트 OS나 다른 namespace에서는 액세스할 수 없다.
  - UTS namespace
    - namespace 별로 호스트명이나 도메인명을 독자적으로 가질 수 있다.
  - IPC namespace
    - 프로세스 간의 통신(IPC) 오브젝트를 namespace 별로 독립저긍로 가질 수 있다.

---

#### 릴리스 관리 장치(cgroups)

- 자원의 할당 등을 관리한다.
- 프로세스와 스레드를 그룹화하여, 그 그룹 안에 존재하는 프로세스와 스레드에 대한 관리를 수행하기 위한 기능
- 컨테이너 안의 프로세스에 대해 자원을 제한하거나 늘릴 수 있다.

---

#### 네트워크 구성

- Linux는 Docker를 설치하면 서버의 물리 NIC가 `docker0`이라는 가상 브리지 네트워크로 연결된다.
  - docker0은 Docker를 실행시킨 후에 디폴트로 만들어진다.
  - docker 컨테이너가 실행되면 컨테이너에 `172.17.0.0/16` 이라는 서브넷 마스크를 가진 프라이빗 IP 주소가 eth0(물리 NIC)으로 자동으로 할당
- Docker 컨테이너와 외부 네트워크가 통신을 할 때는 가상 브리지 docker0과 호스트 OS의 물리 NIC에서 패킷을 전송하는 장치가 필요
  - Docker에서는 NAPT 기능을 사용하여 연결